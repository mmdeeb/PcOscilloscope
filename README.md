# Oscilloscope /PC
Oscilloscope using Arduino and computer
## Prepared by: Mohammed yousef mohammed deeb
A project for the subject of controllers in the faculty of Informatics Engineering at the University of Aleppo in the liberated areas
## فيديو شرح المشروع بشكل كامل
[![Project explanation video](https://github.com/mmdeeb/PcOscilloscope/blob/master/img/vv.jpg)](https://drive.google.com/file/d/1A7uExNKH6BorsYwiNYdgPYV827Eba2JP/view?usp=share_link)

### ماهو الـ Oscilloscope؟
يعتبر Oscilloscope "راسم الاشارة" من أهم أجهزة قياس واختبار الدوائر الإلكترونية حيث أنه يمكننا من رؤية الإشارات في نقاط متعددة من الدائرة وبالتالي نستطيع اكتشاف إذا كان أي جزء يعمل بطريقة صحيحة أم لا.
فالـ Oscilloscope يمكننا من رؤية صورة الإشارة ومعرفة شكلها فيما إذا كانت جيبيه أو مربعة مثلا.

  1-	متحكمة: واستخدمنا هنا شريحة Arduino mega2560
 
 2-	جهاز حاسب: أي جهاز حاسب بعد تحميل البرمجية الخاصة بالعرض


###	المتحكمة والعمليات والبرمجيات المطبقة عليها:

كما تحدثنا سابقاً أننا استخدمنا في مشروعنا متحكم Atmega2560 والذي يعمل بترد 16MHz ويمتلك ضمن بنيته مبدل تشابهي رقمي والذي يسمح للمتحكم بقراءة ومعالجة الإشارات التشابهية المنتشرة في معظم التطبيقات ويتميز بالمواصفات التالية:

•	دقة تبديل 10Bit، بخطأ مطلق (2LSB+) 

•	زمن تبديل [13~260uS]

•	تردد أخذ عينات يصل حتى 76.9KSPS

•	ناخب اختيار بين 16 قناة

•	مقاطعة اكتمال عملية التبديل

ليعمل تطبيقنا بشكل كامل هنالك سلسلة من العمليات التي تتم في المتحكم وهي على الشكل التالي:

1-	قراءة قيمة الجهد من أحد قنوات المبدل.

2-	تطبيق عملية التبديل عليها.

3-	إرسال هذه القيمة للحاسب عبر منفذ الاتصال USRT

هذه السلسلة من العلميات تتضمن بعض العمليات الجزئية التي ستم شرحها بالتفصيل أثناء شرح الكود البرمجي

م استخدام لغة الـ C لبرمجة المتحكمة مع محرر الأكواد mikroC

<img src="https://github.com/mmdeeb/PcOscilloscope/blob/master/img/mikroC.jpg">


نلاحظ أن الكود مقسوم إلى ثلاثة أجزاء رئسية:


1-	تهيئة المبدل ADC: 

-	ADMUX=0b00100000: اختيار جهد القطب Aref كجهد مرجعي، محاذاة الناتج لليسار، اختيار القناة ch0.

-	ADCSRA=0b10000111: تفعيل المبدل واختيار نسبة التقسيم (هنا اخترنا نسبة التقسيم 128 لأن تردد عمل المعالج هو 16MHz وحتى يعمل المبدل بشكل صحيح يجب أن يكون تردد نبضات تشغل المبدل ضمن المجال [50KHz ~ 200KHz] 16MHz / 128=125Khz وهكذا نكون قد حققنا الشرط المطلوب).

-	ADCSRB=0b00000000: لم يتم اختيار مصدر قدح آلي.

-	DIR0=0b00000001: ضبط الخانة الموافقة للقناة 0 بهدف توفير الطاقة.

2-	تهيئة منفذ الاتصال USART:

-	UCSR0B=0b00001000: تفعيل عملية ارسال البيانات.

-	UCSR0C=0B00000110: تحديد نمط العمل (Asynchronous USART) و تحديد حجم خانة التوقف (1-bit) وتحديد حجم المعطيات (8Bit). 

-	UBRR0H=0, UBRR0L=3: تحديد معدل ارسل البيانات (250K or 230.4k). 

3-	حلقة لا نهائية ضمنها تتم عمليات المعالجة والإرسال:

-	ADCSRA.B6=1: قدح المبدل ليبدأ التبديل.

-	While(ADCSRA.B4==0){}: انتظار تحول علم اكتمال التبديل إلى واحد.

-	ADCSRA.B4=1: تصفير علم اكتمال التبديل.

-	UDR0=ADCH: ارسال نتيجة التبيدل عبر منفذ الاتصال.


إذن لو أرردنا توضيح العملية بشكل كامل ستكون على الشكل التالي:

أولاً: نقوم بتوصيل الـ Aref مع منبع جهد 5v 

ثانياً: تتم قراءة الإشارة المراد عرضها عبر القناة  CH0 والتي تسمى على شريحة الأردوينو A0، ومن ثم نقوم بتحويلها لقيمة رقمية ثم نقوم بإرسالها عبر قناة الاتصال USRAT وباقي العمليات تكون على الحاسب.

<img src="https://github.com/mmdeeb/PcOscilloscope/blob/master/img/ar.jpg">

###	الحاسب والبرمجية المطبقة عليه:


-	اللغة المستخدمة لبرمجة التطبيق هي لغة  C# تطبيقات Windows forms App.

-	المحرر: Microsoft Visual Studio 2022.

#### الواجهة النهائية للتطبيق:

<img src="https://github.com/mmdeeb/PcOscilloscope/blob/master/img/gui.jpg">

### تم شرح الكود بالتفصيل ضمن الفيديو المرفق مع الملف


